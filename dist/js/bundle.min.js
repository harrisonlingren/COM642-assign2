"use strict";function loadTodoCards(){$.getJSON("/item/all",function(t){$.each(t.data,function(t,e){createNewCard(e),todoItemsData.push(e)}),initCardEvents()})}function initCardEvents(){var t=this,e=$(".cardContainer");e.sortable({handle:".card-title",update:function(){$(".card",e).each(function(t,e){$(e).index()})}}),$('.card input[type="checkbox"]').click(function(e){var a=$(e.currentTarget).parent().attr("id");a=parseInt(a[a.length-1]);var d=$("#todo"+a+' input[type="checkbox"]').is(":checked");$.ajax({url:"/item/"+a,type:"PUT",data:{done:d},success:editSuccess,error:function(){console.error("Could not change to-do item status to "+d),$("#todo"+a+" .card-title, #todo"+a+" .card-text").toggleClass("done"),$(t).attr("checked",t.checked)}}),$("#todo"+a+" .card-title, #todo"+a+" .card-text").toggleClass("done")}),$(".card .btn.btn-danger").click(function(t){var e=$(t.currentTarget).parent(),a=e.attr("id");a=parseInt(a[a.length-1]),$.ajax({url:"/item/"+a,type:"DELETE",success:function(t,d,i){e.remove(),todoItemsData.splice(a,1),alerts()},error:function(t,e,a){console.error(a)}})}),$("#new-item").click(function(){$("#edit-modal button.btn-primary").attr("data-editmode","new"),$("#item-title").val(""),$("#item-category").val(""),$("#item-date").val(""),$("#item-description").val(""),$("#edit-modal button.btn-primary").attr("")}),$(".edit-btn").click(function(){$("#edit-modal button.btn-primary").attr("data-editmode","edit")})}function createNewCard(t){var e=$(".cardContainer"),a=$('<h4 class="card-title"></h4>').text(t.title),d=$('<p class="card-text"></p>').text(t.description),i=$("<label>Completed</label>").attr("for","todo"+t.item_id),o=$('<input type="checkbox" />').attr("checked",parseBoolean(t.done));parseBoolean(t.done)&&(a.addClass("done"),d.addClass("done"));var n=$('<button class="btn btn-circle btn-danger" type="button"></button>').append('<i class="fa fa-times"></i>'),r=$('<button class="btn btn-circle btn-info edit-btn" type="button"></button>').attr("data-toggle","modal").attr("data-target","#edit-modal").attr("data-todoid",t.item_id).append('<i class="fa fa-pencil"></i>'),c=$('<div class="card"></div>').attr("id","todo"+t.item_id).append(a).append(n).append(r).append(d).append(i).append(o);e.append(c)}function parseBoolean(t){return"true"==t||1==t}function editSuccess(t,e,a){if(200==a.status){var d=t.data.item_id;$("#todo"+d+" .card-title").text(t.data.title),$("#todo"+d+" .card-text").text(t.data.description),$("#todo"+d+' input[type="checkbox"]').attr("checked",t.data.done)}else console.error("Could not edit to-do item!")}function getCards(){$.getJSON("/item/all",function(t){$.each(t.data,function(t,e){buildArray(e)}),number(),alerts()})}function number(){var t=cardsArray.length;$("span.top-label.label.label-warning").text(t)}function daysLeft(t){var e=new Date;t=new Date(t);return Math.round((t-e)/864e5)}function alerts(){$(".dropdown-alerts").empty(),$.each(cardsArray,function(t,e){var a=$('<i class="fa fa-tasks fa-fw"></i>');console.log(e.date);var d=$('<span class="pull-right text-muted small"></span>').text(daysLeft(e.date)+" days left"),i=$("<div></div>").append(a).append(e.title).append(d),o=$('<a href="#"></a>').append(i),n=$("<li></li>").append(o),r=$('<li class="divider"></li>');$("ul.dropdown-menu.dropdown-alerts").append(n).append(r)})}function buildArray(t){cardsArray.push(t)}function filterCards(t,e){var a=[];$.each(todoItemsData,function(d,i){"search"==e?(i.title.includes(t)||i.description.includes(t))&&a.push(i):"category"==e?i.category==t&&a.push(i):"all"==e&&a.push(i)}),$(".cardContainer").empty(),$.each(a,function(t,e){createNewCard(e)})}function editSuccess(t,e,a){if(200==a.status){var d=t.data.item_id;$("#todo"+d+" .card-title").text(t.data.title),$("#todo"+d+" .card-text").text(t.data.description),$("#todo"+d+' input[type="checkbox"]').attr("checked",t.data.done)}else console.error("Could not edit to-do item!")}$(document).ready(function(){loadTodoCards()});var todoItemsData=[];$(document).ready(function(){$("#edit-modal").on("show.bs.modal",function(t){var e=$(t.relatedTarget).data("todoid");if(e){var a=todoItemsData[e],d=new Date(a.date);d=d.toISOString().substring(0,10),$("#item-title").val(a.title),$("#item-category").val(a.category),$("#item-date").val(d),$("#item-description").val(a.description),$("#edit-modal button.btn-primary").attr("data-todoid",e)}});var t=$("#edit-modal button.btn-primary");t.click(function(){var e=t.data("editmode"),a=t.data("todoid");if("edit"==e){var d=new Date($("#item-date").val()),i={title:$("#item-title").val(),category:$("#item-category").val(),date:d,done:$("#todo"+a+' input[type="checkbox"]').is(":checked"),description:$("#item-description").val()};$.ajax({url:"/item/"+a,type:"PUT",data:i,success:editSuccess})}else if("new"==e){var o=new Date($("#item-date").val()),n={title:$("#item-title").val(),category:$("#item-category").val(),date:o,done:$("#todo"+a+' input[type="checkbox"]').is(":checked"),description:$("#item-description").val()};$.ajax({url:"/item/new",type:"POST",data:n,success:function(t,e,a){201==a.status?createNewCard(t.data):console.error("Could not edit to-do item!")}})}else console.error("No edit mode specified!")})}),$(document).ready(function(){getCards(),$(".settings-panel").hide(),$("i.fa-bell").parent().click(function(){alerts()}),$("button.btn.btn-primary.save-template").parent().click(function(){setTemplate()})});var cardsArray=[];$(document).ready(function(){$(".navbar-toggle").click(function(){"false"==$(".nav-side").attr("data-collapsed")?($(".nav-side").animate({width:"0"}),$("#page-wrapper").animate({"margin-left":"0px"}),$(".sidebar-collapse").hide(),$(".nav-side").attr("data-collapsed","true")):($(".nav-side").animate({width:"278px"}),$("#page-wrapper").animate({"margin-left":"278px"}),$(".sidebar-collapse").show(),$(".nav-side").attr("data-collapsed","false"))})}),$(document).ready(function(){$(".sidebar-search .btn.btn-default").click(function(){filterCards($('.sidebar-search input[type="text"]').val(),"search")}),$('.sidebar-search input[type="text"]').keypress(function(t){13==(t.keyCode?t.keyCode:t.which)&&$(".sidebar-search .btn.btn-default").click()}),$(".categories button").click(function(t){var e=$(t.target).text();"All tasks"!=e?filterCards(e,"category"):filterCards("","all")})}),$(document).ready(function(){$("#edit-modal").on("show.bs.modal",function(t){var e=$(t.relatedTarget).data("todoid");$.getJSON("/item/"+e,function(t){var a=t.data;$("#item-title").val(a.title),$("#item-category").val(a.category),$("#item-date").val(Date.parse(a.date)),$("#item-description").val(a.description),$("#edit-modal button.btn-primary").attr("data-todoid",e)})});var t=$("#edit-modal button.btn-primary");t.click(function(){var e=t.data("editmode"),a=t.data("todoid");if("edit"==e){var d=new Date($("#item-date").val()),i={title:$("#item-title").val(),category:$("#item-category").val(),date:d,done:$("#todo"+a+' input[type="checkbox"]').is(":checked"),description:$("#item-description").val()};$.ajax({url:"/item/"+a,type:"PUT",data:i,success:editSuccess})}else if("new"==e){var o=new Date($("#item-date").val()),n={title:$("#item-title").val(),category:$("#item-category").val(),date:o,done:$("#todo"+a+' input[type="checkbox"]').is(":checked"),description:$("#item-description").val()};$.ajax({url:"/item/new",type:"POST",data:n,success:function(t,e,a){201==a.status?createNewCard(t.data):console.error("Could not edit to-do item!")}})}else console.error("No edit mode specified!")})});
//# sourceMappingURL=bundle.min.js.map
